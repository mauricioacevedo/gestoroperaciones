<ol class="breadcrumb">
    <li><a href="./#/">Asignaciones</a></li>
    <li class="active">Edatel_georreferencia</li>
</ol>

<div class="row"><!--Row Herramientas-->
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="col-lg-3 col-xs-3">
            </div>
            <div class="col-lg-6 col-xs-6">
                <div class="col-lg-6 col-xs-6">
                    <div class="form-group">
                        <div class="input-group merged">

                            <input type="text" class="form-control  sm" title="Ingrese palabra a buscar"
                                   data-toggle="tooltip" data-placement="top" ng-model="nuevoBuscarTip"
                                   ng-change="muestraBusquedaTip(nuevoBuscarTip);" placeholder="Buscador de Tips"><span
                                class="input-group-addon"><i class="fa fa-arrow-circle-left fa-fw"></i></span>

                        </div>

                    </div>
                </div>

                <div class="col-lg-6 col-xs-6" ng-controller="popupsCtrl">
                    <button type="button" ng-click="btnFunctions.BuscaNodo()" class="btn btn-primary btn-circle-sm "
                            title="Buscar capacidad HFC" data-toggle="tooltip" data-placement="top"><i
                            class="fa fa-television"></i></button>
                    <button type="button" ng-click="btnFunctions.abrirCalculoDistancia()"
                            class="btn btn-primary btn-circle-sm" title="Buscar capacidad REDCO" data-toggle="tooltip"
                            data-placement="top"><i class="fa fa-tty"></i></button>
                    <button type="button" ng-click="btnFunctions.BuscaGPON()" class="btn btn-primary btn-circle-sm"
                            title="Buscar capacidad GPON" data-toggle="tooltip" data-placement="top"><i
                            class="fa fa-google-plus"></i></button>


                </div>
            </div>
            <div class="col-lg-3 col-xs-3">
            </div>
        </div><!--panel body-->
    </div><!--panel-->

    <div class="row" id="mostrarTIP"><!--Row Buscador de TIPS -->
        <div class="col-lg-12 col-xs-12">
            <div class="pull-left">
                <table class="table small table-striped table-hover table-bordered table-condensed" width="100%">
                    <tbody>
                    <tr ng-repeat="data in listadoTips|filter:nuevoBuscarTip">
                        <td><a class="Tips" ng-click="AbreTips(data.ID)">{{data.TITULO}}</a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div><!--Row Buscador de TIPS -->

</div><!--Row Herramientas-->

<div class="row"><!--Row DemePedido -->
    <LABEL><CENTER>  GEORREFERENCIA </CENTER></LABEL>
    <div class="panel panel-info">
        <div class="panel-heading">
            <div class="row"><!--Row Concepto Plaza - Buscador Tips -->


                <div class="col-lg-3 col-xs-4">

                    <form class="form-inline" role="form">




                        <div class="form-group btn-group">

                            <input type="text" size="13px" class="form-control btn-group btn btn-sm btn-default"
                                   onClick="this.setSelectionRange(0, this.value.length)"
                                   title="Escriba pedido a Buscar" data-toggle="tooltip" data-placement="top"
                                   placeholder="Buscador de Pedido" ng-model="bpedido">
                            <button type="button" class="form-control btn btn-sm btn-primary" title="Buscar Pedido"
                                    data-toggle="tooltip" data-placement="top" ng-click="buscarPedido(bpedido,iplaza);">
                                <i class="fa fa-search" aria-hidden="true"></i></button>
                            <button id="manual" type="button" class="form-control btn btn-sm btn-warning"
                                    title="Ingrese Pedido Manual" data-toggle="tooltip" data-placement="top"
                                    ng-click="manual();"><i class="fa fa-user-times" aria-hidden="true"></i></button>
                            <button id="programados" type="button" class="form-control btn btn-sm btn-warning"
                                    data-toggle="modal" data-target="#PedidosProgramados" data-backdrop="static"
                                    ng-click="ProgramadosModal()"><i class="fa fa-calendar-check-o" aria-hidden="true"
                                                                     data-toggle="tooltip" data-placement="top"
                                                                     title="Programados/Malos"></i></button>
                        </div>


                    </form>

                </div>
                <div class="col-lg-1 col-xs-1">
                    <div class="loading-spiner-holder" data-loading>
                        <div class="loading-spiner"><img title="Esperando respuesta" data-toggle="tooltip"
                                                         data-placement="top" src="images/loader.gif"/></div>
                    </div>
                </div>

            </div><!--Row Concepto Plaza - Buscador Tips -->


        </div><!--Panel Heading -->
        <div class="panel-body">

            <div class="row"><!--Row Deme Pedido -->

                <div ng-show="error" class="alert alert-danger "><!--Muestra error cuando no hay pedidos -->
                    <i class="fa fa-exclamation-circle" aria-hidden="true"></i> {{error}}
                </div><!--Muestra error cuando no hay pedidos -->

                <div class="col-lg-12 col-xs-12">

                    <div class="row">
                        <div class="container" ng-hide="pedidoinfo!='Pedido'">
                            <div class="jumbotron">
                                <center><h3> Presione <strong>DemePedido</strong> para obtener un pedido del Concepto y
                                    Plaza seleccionada.</h3></center>
                            </div>
                        </div>
                    </div>
                    <div class="row"><!--Pedido Manual -->

                        <table class="table small table-striped table-hover table-bordered table-condensed" width="300"
                               style="width: auto !important;" ng-show="mpedido.active==1">
                            <thead>
                            <th>Pedido</th>
                            <th>Fuente de Informacion</th>
                            <th>Concepto Final</th>
                            <th>Estado</th>
                            <th>&nbsp;</th>
                            </thead>
                            <tr>
                                <td><input id='ipedido' ng-model="mpedido.pedido" type="text" class="form-control"
                                           placeholder="Pedido"/></td>
                                <td>
                                    <select ng-model="mpedido.fuente" class="form-control">
                                        <option value='FENIX BOGOTA'>FENIX BOGOTA</option>
                                        <option value='NCA'>NCA</option>
                                        <option value='BACKOFFICE'>BACKOFFICE</option>
                                        <option value='FENIX_NAL'>FENIX_NAL</option>
                                        FENIX_NAL
                                    </select>
                                </td>
                                <td>
                                    <input type="text" class="form-control col-xs-8" aria-label=""
                                           ng-model="mpedido.concepto">
                                </td>
                                <td>
                                    <select class="form-control" ng-model="mpedido.estado">
                                        <option value='PORDE'>PORDE</option>
                                        <option value='PENDIENTE'>PENDIENTE</option>
                                        <option value='ANULADO'>ANULADO</option>
                                    </select>
                                </td>
                                <td>
                                    <button id="mguardar" type="button" class="btn btn-sm btn-success"
                                            ng-click="msavePedido();"><span id="mloader"></span>&nbsp; Guardar
                                    </button>
                                </td>
                            </tr>
                        </table>

                    </div><!--Pedido Manual -->
                    <div class="row">
                        <form name="pedidoForm" ng-submit="savePedido(pedido,userID)" novalidate>

                            <table class="table small table-striped table-hover table-bordered table-condensed"
                                   ng-show="peds.length>0">
                                <thead>
                                <th>Solicitud</th>
                                <th>Información</th>
                                <th>Tiempo</th>
                                <th>Status</th>
                                <th>Observaciones</th>
                                <th>Opciones</th>
                                </thead>

                                <tr ng-repeat="service in peds track by $index">
                                    <td>{{service.SUBPEDIDO_ID}}</td>
                                    <td>
                                        <b>Fecha Carga:</b> {{service.FECHA_CARGA}}<br>
                                        <b>Dirección:</b> {{service.DIRCOMPLETA}}<br>
                                        <b>Georeferencia:</b> {{service.GEOREFERENCIA}}<br>
                                        <b>Red Sugerida:</b> {{service.REDSUGERIDA}}<br>

                                        <!-- <b>Pagina:</b>{{service.PAGINA_SERVICIO}}<br>-->
                                    </td>

                                    <!--td>{{service.PRODUCTO}}</td-->
                                    <td><font color='red'>{{service.TIEMPO_COLA}}</font></td>
                                    <td><font color='red'>{{service.STATUS}}</font></td>

                                    <td><textarea name="textObs" rows"40"></textarea> </td>


                                    <td>
                                        <select ng-model="service.motivo_malo" class="form-control" style="" name="obs">
                                            <option value='' disabled>---SELECCIONE---</option>
                                            <option value='GESTIONADO'>GESTIONADO</option>
                                            <option value='PENDIENTE'>PENDIENTE</option>

                                        </select>
                                        <br>

                                        <button id="mybutt0" type="button" class="btn btn-sm btn-success" ng-click="savePedido($index)"><span id="class0"></span>&nbsp;
                                            Guardar
                                        </button>




                                        <button ng-show="isAuthorized(service.CONCEPTO_ID);" id="mybutt{{$index}}"
                                                type="button" class="btn btn-sm btn-success"
                                                ng-click="savePedido($index)"><span id="class{{$index}}"></span>&nbsp;
                                            Guardar
                                        </button>
                                      </td>

                                </tr>
                            </table>
                            <!--td><button id="iniciar" type="button" class="btn btn-sm btn-success" onclick="javascript:activar();">Iniciar</a></td-->
                            <div id="warning" ng-model="warnin"></div>


                        </form>

                    </div>


                </div>


            </div><!-- Row Deme Pedido -->
        </div><!--Panel body -->


    </div><!--Panel -->
</div><!--Row DemePedido -->

<table class="table small table-striped table-hover table-bordered table-condensed" width="100%">
                            <thead>

                                    <th width="7%"><font color="BLACK">SOLICITUD</font></th>
                                    <th width="9%"><font color="BLACK">LOCALIDAD</font></th>
                                    <th width="9%"><font color="BLACK">ESTADO</font></th>
                                    <th width="9%"><font color="BLACK">OBSERVACIONES</font></th>
                                    <th width="9%"><font color="BLACK">ACCIONES</font></th>




                            </thead>

                            <tr>

                            <td>
                                <input type="text" class="form-control" style="width: 100px" id="fromDate" placeholder="SOLICITUD" name="SOLICITUD" ng-model="transaccion.SOLICITUD"/>
                            </td>

                            <td>

					             <ui-select ng-model="transaccion.MUNICIPIO_ID" style="width:200px;" append-to-body="true">
						         <ui-select-match placeholder="MUNICIPIO">
							     {{transaccion.MUNICIPIO_ID.MUNICIPIO}}
						        </ui-select-match>
						         <ui-select-choices repeat="g  in  lstMunicipios | filter: $select.search track by $index">
							     <div ng-bind-html="g.MUNICIPIO | highlight: $select.search"></div>
							    <small ng-bind-html="g.DEPARTAMENTO | highlight: $select.search"></small>
						        </ui-select-choices>
					           </ui-select>

                                <select
                                                class="form-control btn-xs"
                                                name="estado"
                                                ng-model="service.estado"
                                                ng-show="isAuthorized(service.CONCEPTO_ID)"
                                        >
                                            <option value="" disabled>--Seleccione--</option>
                                            <option
                                                    ng-repeat="d in listaOpcionesGestion | unique:'ESTADO_ID'"

                                                    value="{{d.ESTADO_ID}}">
                                                {{d.ESTADO_ID}}
                                            </option>
                                        </select>
                                        <br>

                                        <select
                                                class="form-control btn-xs"
                                                name="obs"
                                                ng-model="service.motivo_malo"
                                                ng-change="onChangeAccion()"
                                        >
                                            <option value="" disabled>--Seleccione--</option>
                                            <option
                                                    ng-repeat="d in listaOpcionesGestion | filter:{ESTADO_ID: service.estado}:true | unique:'OBSERVACION_ID'"

                                                    value="{{d.OBSERVACION_ID}}">
                                                {{d.OBSERVACION_ID}}
                                            </option>
                                        </select>



                            </td>

                            <td>
                                <select ng-model="transaccion.ESTADO" class="form-control" style="" >
                                        <option value='' disabled>---SELECCIONE---</option>
                                        <option value='PENDIENTE'>PENDIENTE</option>
                                        <option value='GESTIONADO'>GESTIONADO</option>

                                </select>
                            </td>

                            <td>
                                <textarea name="textObs" rows"40" ng-model="transaccion.OBSERVACIONES"></textarea>
                            </td>

                            <td>
                                 <button class="btn btn-success btn-sm" onclick="location.reload();" ng-click="saveTransaccion(transaccion);" ><span class="glyphicon glyphicon-plus-sign"></span> Guardar</button>

                            </td>
                            </tr>
