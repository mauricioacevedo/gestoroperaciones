<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class = "panel panel-default">

                <div class = "panel-heading">

                    <div class="row">
                        <div class="col-md-6 col-xs-12">
                            <b><i class="fa fa-bars"></i> DemePedido {{iconcepto.GRUPO}}</b>

                        </div>
                        <!--Botones de herramientas -->
                        <btn-tools class="col-md-6 " ng-show="tools" ng-class="tools==false?'animated bounceOutRight':'animated fadeInUp'"> </btn-tools>
                        <!--Botones de herramientas -->
                    </div>

                </div>



                <div class = "panel-heading nav navbar-default">

                    <div class="col-lg-12 col-xs-10">
                        <ul class="nav navbar-nav navbar-left">

                            <li>

                                <!--<i class="fa fa-globe" aria-hidden="true"> </i>&nbsp;
                                <select class="btn btn-default btn-xs grupo-select"
                                        style="width: 200px"
                                        ng-model="izona"
                                        >
                                    <option value="" disabled>--Seleccione Zona--</option>
                                    <option value="TODOS"> TODOS</option>
                                    <option value="NOROCCIDENTE"> NOROCCIDENTE</option>
                                    <option value="CENTRO"> CENTRO </option>
                                    <option value="NORTE"> NORTE</option>
                                    <option value="SUR"> SUR</option>
                                    <option value="ORIENTE"> ORIENTE</option>
                                    <option value="EJE CAFETERO"> EJE CAFETERO</option>
                                    <option value="ISLAS"> ISLAS</option>
                                    <option value="VACIO"> VACIO</option>
                                </select>-->

                                <!--ng-change="checkMunicipiosAsignaciones()"-->
                                <select class="btn btn-default btn-xs grupo-select"
                                        style="width: 200px"
                                        ng-model="iconcepto"
                                        id="concepto"
                                        ng-options="d.CONCEPTO_ID+' | '+d.FUENTE group by d.GRUPO for d in listadoConceptos | filter:{ESTADO: '1',} track by d.ID "
                                        ng-change="getZonasGestor(iconcepto);"
                                        >
                                    <option value="" disabled>--Seleccione Concepto--</option>
                                </select>

                            </li>

                            <li >
                                <!--i class="fa fa-globe" aria-hidden="true"> </i-->&nbsp;

                                 <select class="btn btn-default btn-xs grupo-select"
                                        style="width: 200px"
                                        ng-model="izona"
                                        id="zona"
                                        ng-options="d.ZONA+' | '+d.TOTAL for d in listadoZonas"
                                        ng-change=""
                                        ng-show="errorDatos == 'Pendientes' || errorDatos == '' "
                                        >
                                    <option value="" disabled>--Seleccione Zona--</option>
                                </select>
                            </li>
                            <li>

                                <!--i class="fa fa-globe" aria-hidden="true"> </i-->&nbsp;
                                <select class="btn btn-default btn-xs grupo-select"
                                        style="width: 200px"
                                        ng-model="iplaza"
                                        ng-options="d.MUNICIPIO_ID +'('+d.COUNTER+')'+ ''  for d in listadoMunicipios track by d.MUNICIPIO_ID"
                                        ng-show=""
                                        >
                                    <option value="" disabled>--Seleccione Municipio--</option>
                                </select>

                            </li>
                            <li>

                                <button id="ped" type="button" class="btn btn-xs btn-default"  ng-show="pedidoIsActive" ng-class="pedidoIsActive==false?'animated bounceOutRight':'animated fadeInUp'" ng-click="executeCopy(pedidoinfo)" popover data-trigger="hover" data-placement="left" data-html="true" data-selector="" data-content="<i class='fa fa-clipboard'></i> Copiar">{{pedidoinfo}}
                                </button>
                                <button type="button" id="iniciar" class="btn btn-success btn-DemePedido-xs" ng-click="start(pedido);"   ng-disabled="false">
                                    DemePedido
                                </button>


                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li>
                                <div class="col-md-1 col-xs-1 ">
                                    <div data-ng-if="loading">
                                        <img title="Esperando respuesta" tooltip data-placement="top" src="images/loader.gif" />
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="btn-group">
                                    <input style="width:140px"  class="btn btn-default btn-xs " type="text" ng-model="buscar" placeholder="Buscar..." ng-trim="true" ng-disabled="loading" select-on-click capitalize/>
                                    <select ng-model="ifuente.FUENTE" style="width: 100px" class="btn btn-success btn-xs grupo-select" ng-change="mirarifuente()">
                                        <option ng-selected="{{f.FUENTE == 'FENIX_NAL'}}"
                                                ng-repeat="f in listadoConceptos | unique:'FUENTE'"
                                                value="{{f.FUENTE}}">
                                            {{f.FUENTE}}
                                        </option>
                                    </select>


                                    <button type="button" class="btn btn-success btn-xs" ng-click="buscarPedido(buscar,pedidoinfo)"   ng-disabled="loading" >
                                        <i class="fa fa-search" aria-hidden="true"> </i>
                                    </button>
                                </div>
                            </li>
                            <li> &nbsp;</li>
                            <li>
                                <button type="button" class="btn btn-warning btn-circle-xss"  ng-click="ProgramadosModal()" data-toggle="modal" data-target="#PedidosProgramados" data-backdrop="static">
                                    <i class="fa fa-calendar-check-o" tooltip data-placement="top" title="Programados o Malos" aria-hidden="true"> </i>
                                </button>

                            </li>
                            <li> &nbsp;</li>
                            <li>
                                <button id="manual" type="button" class="form-control btn btn-xss btn-danger" title="" data-toggle="tooltip" data-placement="top" ng-click="manual();" data-original-title="Ingrese Pedido Manual"><i class="fa fa-user-times" aria-hidden="true"></i></button>
                            </li>
                        </ul>
                    </div>

                </div>

                <div class="panel-body fixed-panel ">
                    <div class="container-fluid"  ng-show="pedidoIsActive==false">
                        <div class="jumbotron animated bounceInRight ">
                            <div class="text-center"><h3>Gesti√≥n Pendientes {{iconcepto.GRUPO}}</h3></div>
                        </div>

                    </div>
                    <div class="row"><!--Pedido Manual -->

                        <table class="table small table-striped table-hover table-bordered table-condensed" width="300" style="width: auto !important;" ng-show="mpedido.active==1">
                            <thead>
                            <tr><th>Pedido</th>
                            <th>Fuente de Informacion</th>
                            <th>Concepto Final</th>
                            <th>Estado</th>
                            <th>Observacion</th>
                            <th>Departamento</th>
                            <th>Ciudad</th>
                            <th>&nbsp;</th>
                            </tr></thead>
                            <tbody><tr>
                                <td><input id="ipedido" ng-model="mpedido.pedido" type="text" class="form-control ng-pristine ng-untouched ng-valid" placeholder="Pedido"></td>
                                <td>
                                    <select ng-model="mpedido.fuente" class="form-control ng-pristine ng-untouched ng-valid">
                                        <option value="FENIX BOGOTA">FENIX BOGOTA</option>
                                        <option value="SIEBEL">SIEBEL</option>
                                        <option value="BACKOFFICE">BACKOFFICE</option>
                                        <option value="FENIX_NAL">FENIX_NAL</option>
                                        <option value="POBLACIONES">POBLACIONES</option>
                                        <option value="ETP">ETP</option>
                                    </select>
                                </td>
                                <td>

                                  <select class="form-control ng-pristine ng-untouched ng-valid" ng-model="mpedido.concepto"><option value="? undefined:undefined ?"></option>
                                        <option value="CERRADO">CERRADO</option>
                                        <option value="ENRRUTADO">ENRRUTADO</option>
                                        <option value="MALO">MALO</option>
                                    </select>

                                </td>
                                <td>
                                    <select class="form-control ng-pristine ng-untouched ng-valid" ng-model="mpedido.estado"><option value="? undefined:undefined ?"></option>
                                        <option value="GESTIONADO">GESTIONADO</option>
                                        <option value="ANULADO">ANULADO</option>
                                        <option value="GESTIONADO SUPER FORMA">GESTIONADO SUPER FORMA</option>
                                        <option value="PEDIDO DUPLICADO">PEDIDO DUPLICADO</option>
                                        <option value="PENDIENTE">PENDIENTE</option>
                                        <option value="PEDIDO NO SE DEJA GESTIONAR">PEDIDO NO SE DEJA GESTIONAR</option>
                                        <option value="GEOREFERENCIA">GEOREFERENCIA</option>
                                    </select>
                                </td>
                                <td>
                                   <textarea type="text" class="form-control col-xs-8 ng-pristine ng-untouched ng-valid" aria-label="" ng-model="mpedido.observacion"></textarea>
                                </td>
                                 <td>
                                   <!--input type="text" class="form-control col-xs-8" aria-label=""
                                           ng-model="mpedido.departamento"-->
                                     <select class="form-control ng-pristine ng-untouched ng-valid" ng-model="mpedido.departamento"><option value="? undefined:undefined ?"></option>
                                        <option value="AMAZONAS">AMAZONAS</option>
                                        <option value="ANTIOQUIA">ANTIOQUIA</option>
                                        <option value="ARAUCA">ARAUCA</option>
                                        <option value="ATLANTICO">ATLANTICO</option>
                                        <option value="BOGOTA">BOGOTA</option>
                                        <option value="BOLIVAR">BOLIVAR</option>
                                        <option value="BOYACA">BOYACA</option>
                                        <option value="CALDAS">CALDAS</option>
                                        <option value="CAQUETA">CAQUETA</option>
                                        <option value="CASANARE">CASANARE</option>
                                        <option value="CAUCA">CAUCA</option>
                                        <option value="CESAR">CESAR</option>
                                        <option value="CHOCO">CHOCO</option>
                                        <option value="CORDOBA">CORDOBA</option>
                                        <option value="CUNDINAMARCA">CUNDINAMARCA</option>
                                        <option value="DISTRITO CAPITAL DE BOGOTA">DISTRITO CAPITAL DE BOGOTA</option>
                                        <option value="GUAINIA">GUAINIA</option>
                                        <option value="GUAVIARE">GUAVIARE</option>
                                        <option value="HUILA">HUILA</option>
                                        <option value="LA GUAJIRA">LA GUAJIRA</option>
                                        <option value="MAGDALENA">MAGDALENA</option>
                                        <option value="META">META</option>
                                        <option value="NARINO">NARINO</option>
                                        <option value="NORTE DE SANTANDER">NORTE DE SANTANDER</option>
                                        <option value="PUTUMAYO">PUTUMAYO</option>
                                        <option value="QUINDIO">QUINDIO</option>
                                        <option value="RISARALDA">RISARALDA</option>
                                        <option value="SAN ANDRES Y PROVIDENCIA">SAN ANDRES Y PROVIDENCIA</option>
                                        <option value="SANTANDER">SANTANDER</option>
                                        <option value="SUCRE">SUCRE</option>
                                        <option value="TOLIMA">TOLIMA</option>
                                        <option value="VALLE">VALLE</option>
                                        <option value="VAUPES">VAUPES</option>
                                        <option value="VICHADA">VICHADA</option>
                                     </select>
                                </td>
                                 <td>
                                   <input type="text" class="form-control col-xs-8 ng-pristine ng-untouched ng-valid" aria-label="" ng-model="mpedido.ciudad">
                                </td>

                                <td>

                                    <button id="mguardar" type="button" class="btn btn-sm btn-success" ng-click="msavePedido();"><span id="mloader"></span>&nbsp; Guardar
                                    </button>
                                </td>
                            </tr>
                        </tbody></table>

                    </div>

                     <div class="row "  ng-show="pedidoIsBuscado || pedidoIsActive ">

                        <div class="col-md-8">
                            <div class = "panel panel-default">
                                <div class = "panel-heading">
                                    <b><i class="fa fa-tasks" aria-hidden="true"> </i> INFORMACI√ìN</b>
                                    <span class="pull-right">
                                        Concepto: <span class="btn btn-info btn-xs">{{info.CONCEPTO_ID}} </span>
                                        Pedido CRM: <button  class="btn btn-info btn-xs" ng-click="executeCopy(info.PEDIDO_CRM)">{{info.PEDIDO_CRM || 'SIN'}} </button>
                                    </span>
                                </div>
                                <div class="panel-body">
                                    <ul class="list-group" ng-repeat="service in peds  as gestion" >
                                        <div class="col-md-6">

                                            <li class="list-group-item small" ><b>PEDIDO: </b><button type="button" class="btn btn-xs btn-info" ng-click="executeCopy(service.PEDIDO_ID)">
                                                {{service.PEDIDO_ID}}
                                            </button> </li>
                                            <li class="list-group-item small" ><b>OFERTA: </b><button type="button" class="btn btn-xs btn-info" ng-click="executeCopy(service.PEDIDO_CRM)">
                                                {{service.PEDIDO_CRM || 'NO TIENE'}}
                                            </button> </li>
                                            <li class="list-group-item small" ><b>SUBPEDIDO:</b> <span class="small">{{service.SUBPEDIDO_ID}}</span>  </li>
                                            <li class="list-group-item small" ><b>AGENDA: </b><span ng-show="service.FECHA_CITA"  class="ng-binding label label-danger">{{service.FECHA_CITA}}</span></li>
                                            <li class="list-group-item small" ><b>MUNICIPIO:</b> {{service.MUNICIPIO_ID}} </li>
                                            <li class="list-group-item small" ><b>UEN:</b> {{service.UEN_CALCULADA}} </li>
                                            <li class="list-group-item small" >
                                                <b>DIRECCI√ìN:</b> <span class="small">{{service.DIRECCION_SERVICIO}}</span>
                                                <button type="button" class="btn btn-xs btn-default" title="Copiar"
                                                        ng-click="executeCopy(service.DIRECCION_SERVICIO)" ><i class='fa fa-clipboard'></i> </button>
                                            </li>
                                            <li class="list-group-item small" ><b>P√ÅGINA:</b> <span class="small">{{service.PAGINA_SERVICIO}}</span>  </li>
                                            <li class="list-group-item small" ><b>ZONA:</b> <span class="small">{{service.ZONA}}</span>  </li>
                                            <li class="list-group-item small" >
                                                <button class="btn btn-info btn-sm" uib-popover="{{service.OBSERVACIONES || 'Sin Observaciones'}}" popover-title="Observaciones" popover-append-to-body="true" type="button" class="btn btn-default">OBSERVACIONES</button>
                                            </li>
                                        </div>

                                        <div class="col-md-6">
                                            <li class="list-group-item small" ><b>TIPO TX:</b> {{service.DESC_TIPO_TRABAJO}} </li>
                                            <li class="list-group-item small" ><b>PRODUCTO:</b> {{service.PRODUCTO}} </li>


                                            <li class="list-group-item small" ng-show="{{service.PRODUCTO}} == 'Servicio de Internet'"><b>VELOCIDAD ACTUAL: </b><button type="button" class="btn btn-xs btn-info" ng-click="executeCopy(service.IDENTIFICADOR_ID)">
                                                {{service.VEL_IDEN || 'SIN DATOS'}}
                                            </button> </li>

                                            <li class="list-group-item small" ng-show="{{service.PRODUCTO}} == 'Servicio de Internet' " ><b>VELOCIDAD SOLICITADA:</b><span class="btn btn-xs btn-info">{{service.VEL_SOLI || 'SIN DATOS'}} <b>MG</b> </span>
                                            </li>

                                            <li class="list-group-item small" ng-show="{{service.PRODUCTO}} == 'Servicio de Internet'" ><b>ACP INTERNET: </b><button type="button" class="btn btn-xs btn-info" ng-click="executeCopy(service.IDENTIFICADOR_ID)">
                                                {{service.IDENTIFICADOR_ID || 'SIN DATOS'}}
                                            </button> </li>

                                            <li class="list-group-item small" ><b>TECNOLOGIA:</b> {{service.TECNOLOGIA_ID}} </li>
                                            <li class="list-group-item small" ><b>EJECUTIVO:</b> {{service.EJECUTIVO_ID}} </li>
                                            <li class="list-group-item small" ><b>CELULAR:</b> <a ng-href="SIP:003{{service.CELULAR_AVISAR || service.TELEFONO_AVISAR}}" >{{service.CELULAR_AVISAR || service.TELEFONO_AVISAR}} <i class="fa fa-phone-square" aria-hidden="true"></i></a> </li>
                                            <li class="list-group-item small" ><b>TELEFONO:</b> <a ng-href="SIP:0{{service.TELEFONO_AVISAR || service.CELULAR_AVISAR}}" >{{service.TELEFONO_AVISAR || service.CELULAR_AVISAR}} <i class="fa fa-phone-square" aria-hidden="true"></i></a> </li>
                                            <li class="list-group-item small" ><b>FECHA ESTADO:</b> {{service.FECHA_ESTADO}} </li>
                                            <li class="list-group-item small" ><b>TIEMPO EN COLA:</b> {{service.TIEMPO_COLA}} </li>
                                            <li class="list-group-item small" ><b>FECHA INGRESO:</b> {{service.FECHA_INGRESO}} </li>
                                            <li class="list-group-item small" ><b>TIEMPO INGRESO:</b> {{service.TIEMPO_INGRESO}} </li>


                                             <!--<li class="list-group-item small" ><b>PEDIDO: </b><button type="button" class="btn btn-xs btn-info" ng-click="executeCopy(service.PEDIDO_ID)">
                                                {{service.PEDIDO_ID}}
                                            </button> </li>-->

<!--                                            <li class="list-group-item small" ><b>AGENDA: </b><span ng-show="service.FECHA_CITA"  class="ng-binding label label-danger">{{service.FECHA_CITA}}</span></li>-->


                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class = "panel panel-default">
                                <div class = "panel-heading">
                                    <b><i class="fa fa-cogs" aria-hidden="true"> </i> SEGUIMIENTO</b>
                                </div>
                                <div class = "panel-heading">
                                    <div class="container-fluid">

                                        <form name="seguimiento_form" id="seguimiento_form">
                                            <div class="form-group " ng-class="{ 'has-error' : seguimiento_form.estado.$pristine && seguimiento_form.estado.$invalid}">
                                                <label for="estado" class="control-label">Estado Gesti√≥n:</label>

                                                <select id="estado"
                                                        class= "form-control btn-xs"
                                                        name="estado"
                                                        ng-model="InfoPedido.ESTADO_PROCESO"
                                                        ng-disabled="ocupado"
                                                        ng-click="onChangeEstado()"
                                                        required>
                                                    <option value="" disabled>--Seleccione--</option>
                                                    <option
                                                            ng-repeat="d in listaOpcionesGestion | unique:'ESTADO_ID'"

                                                            value="{{d.ESTADO_ID}}">
                                                        {{d.ESTADO_ID}}
                                                    </option>
                                                </select>

                                            </div>

                                            <div class="form-group " ng-show="InfoPedido.ESTADO_PROCESO" ng-class="{ 'has-error' : seguimiento_form.obs.$pristine && seguimiento_form.obs.$invalid}">
                                                <label for="obs" class="control-label">Observaci√≥n Gesti√≥n:</label>
                                                <select id="obs"
                                                        class= "form-control btn-xs"
                                                        name="obs"
                                                        ng-model="InfoPedido.OBSERVACIONES_PROCESO"
                                                        ng-change="onChangeAccion(InfoPedido.OBSERVACIONES_PROCESO)" required>
                                                    <option value="" disabled>--Seleccione--</option>
                                                    <option
                                                            ng-repeat="d in listaOpcionesGestion | filter:{ESTADO_ID: InfoPedido.ESTADO_PROCESO}:true | unique:'OBSERVACION_ID'"

                                                            value="{{d.OBSERVACION_ID}}">
                                                        {{d.OBSERVACION_ID}}
                                                    </option>
                                                </select>
                                            </div>

                                            <div class="form-group" ng-show="InfoPedido.ESTADO_PROCESO">
                                            <label for="MALINGRESO" class="control-label">Mal Ingreso ?</label>
                                                <br>
                                                        <td>
                                                            <span class="small">

                                                                <input type="checkbox" class="flipswitch"
                                                                       ng-model="InfoPedido.MAL_INGRESO"
                                                                       name="MALINGRESO"
                                                                       id="MALINGRESO"
                                                                       ng-change="changeStatus(editaInfo.MAL_INGRESO)"
                                                                       ng-true-value="'SI'"                                         >

                                                            </span>

                                                        </td>
                                            </div>
                                            <div class="form-group " ng-show="editaInfo.MALINGRESO == 'SI'" ng-class="">
                                                <label for="MotivoMalIngreso" class="control-label">Motivo Mal Ingreso:</label>
                                                <select id="MotivoMalIngreso"
                                                        class= "form-control btn-xs"
                                                        name="MotivoMalIngreso"
                                                        ng-model="InfoPedido.MOTIVO_MAL_INGRESO"
                                                        ng-change="" required>
                                                    <option value="" disabled>--Seleccione--</option>
                                                    <option value="TRANSACCION COMBINADA">TRANSACCION COMBINADA</option>
                                                    <option value="PORTABILIDAD NUMERICA">PORTABILIDAD NUMERICA</option>
                                                    <option value="SIN PAGINACION">SIN PAGINACION</option>
                                                    <option value="DIRECCION MAL INGRESADA">DIRECCION MAL INGRESADA</option>
                                                    <option value="PLAN NO EXISTE">PLAN NO EXISTE</option>

                                                </select>
                                            </div>

                                            <div class="form-group has-feedback" ng-show="programar">
                                                <label for="programacion" class="control-label">Programaci√≥n:</label>
                                                <input type="text" name="programacion" id="programacion" class="form-control" placeholder="id llamada" ng-model="InfoPedido.PROGRAMACION" datetime-picker date-format="yyyy-MM-dd HH:mm:ss"/>
                                                <i class="fa fa-calendar-check-o form-control-feedback"></i>
                                            </div>
                                            <div class="form-group has-feedback">
                                                <label for="idllamada" class="control-label">ID Llamada:</label>
                                                <input type="text" name="idllamada" id="idllamada" class="form-control" placeholder="id llamada" ng-model="InfoPedido.IDLLAMADA"/>
                                                <i class="fa fa-phone-square form-control-feedback"></i>
                                            </div>
                                            <div class="form-group has-feedback">
                                                <label for="nuevopedido" class="control-label">Nuevo Pedido:</label>
                                                <input type="text" name="nuevopedido" id="nuevopedido" class="form-control" placeholder="12458974145" ng-model="InfoPedido.NUEVOPEDIDO"/>
                                                <i class="fa fa-briefcase form-control-feedback"></i>
                                            </div>
                                            <div class="form-group  has-feedback" ng-show="habilitaCr">
                                                <label for="incidente" class="control-label">CR Incidente:</label>
                                                <input type="text" name="incidente" id="incidente" class="form-control btn-xs" ng-model="InfoPedido.INCIDENTE">
                                                <i class="fa fa-flag form-control-feedback"></i>
                                            </div>
                                            <div>
                                                <div class="hide" ng-repeat="InfoPedido in listaOpcionesGestion | filter:{ESTADO_ID: InfoPedido.ESTADO_PROCESO, OBSERVACION_ID: InfoPedido.OBSERVACIONES_PROCESO} | unique:'STATUS' as status">
                                                    <input ng-model="InfoPedido.STATUS">
                                                </div>
                                            </div>
                                            <div>
                                                <div class="hide" ng-repeat="InfoPedido in listaOpcionesGestion | filter:{ESTADO_ID: InfoPedido.ESTADO_PROCESO, OBSERVACION_ID: InfoPedido.OBSERVACIONES_PROCESO} | unique:'ACTIVIDAD' as actividad">
                                                    <input ng-model="InfoPedido.ACTIVIDAD">
                                                </div>
                                            </div>
                                            <div class="form-group  has-feedback" ng-show="idPermisos.indexOf(logedUser.login)!=-1">
                                                <div class="btn-group btn-group-justified" role="group" aria-label="...">
                                                    <div class="btn-group" role="group">
                                                        <button
                                                                type="button"
                                                                class="btn btn-default"
                                                                data-toggle="modal"
                                                                data-target="#ModalAuditoria"
                                                                data-backdrop="static"
                                                                ng-disabled="idConceptos.indexOf(info.CONCEPTO_ID)==-1"
                                                                ng-click="abrirModalAuditoria(gestion[0].PEDIDO_ID,logedUser.login)">Auditar</button>
                                                    </div>
                                                </div>
                                            </div>

                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                </div><!--Panel Body -->
                <div class="panel-footer clearfix" >
                    <div class="col-md-6" >
                        <!--Campos futuros en footer izquierda -->
                        <ul class="nav navbar-nav navbar-left animated bounceInRight" ng-show="pedidoIsActive" >
                            <li><span class="label label-primary" tooltip data-placement="top" title="Programaci√≥n">{{fechaprogramacion || 'Sin Programaci√≥n'}}</span>
                            </li>
                            <li><span class="label label-primary" tooltip data-placement="top" title="Prioridad">{{prioridadPedido || 'Normal'}}</span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="nav navbar-nav" ng-class="pedidoIsGuardado==false?'animated bounceOutRight':'animated bounceInRight'" ng-show="pedidoIsGuardado==true">
                                <span class="label label-primary">Pedido Guardado</span>&nbsp;

                            </li>
                            <li>
                                <div ng-hide="true">
                                    <button type="button" class="btn btn-success btn-xs" ng-click="guardarPedido(InfoPedido,gestion[0],status,actividad)"  ng-disabled="!accRdy || guardando || loading">
                                        Guardar <span ng-show="guardando"><i class="fa fa-spinner fa-spin"></i></span>
                                    </button></div>
                                <button type="button" class="btn btn-primary btn-xs" ng-click="guardarPedidoGestion(InfoPedido,gestion[0],status,actividad)"  ng-disabled="!accRdy || guardando || loading">
                                    Guardar <span ng-show="guardando"><i class="fa fa-spinner fa-spin"></i></span>
                                </button>
                            </li>
                            <li>&nbsp; | &nbsp;</li>
                            <li>
                                <button type="button" class="btn btn-info btn-circle-xss" ng-click="historicoModal(gestion[0].PEDIDO_ID)" data-toggle="modal" data-target="#HistoricoPedido" data-backdrop="static"  popover data-trigger="hover" data-placement="left" data-html="true" data-content="<code>Historico</code>"   ng-disabled="!pedidoIsActive">
                                    <i class="fa fa-rss"  aria-hidden="true"> </i>
                                </button>
                            </li>
                            <li>&nbsp; | &nbsp;</li>
                            <li>
                                <button type="button" class="btn btn-info btn-circle-xss" ng-click="PedidosPorUser()" data-toggle="modal" data-target="#HistoricoPedidoUser" data-backdrop="static"  popover data-trigger="hover" data-placement="left" data-html="true" data-content="<code>Historico por {{logedUser.login}}</code>" >
                                    <i class="fa fa-user-circle"  aria-hidden="true"> </i>
                                </button>
                            </li>
                        </ul>
                    </div>
                </div><!--Panel Footer -->
            </div>

        </div>
    </div><!--Row 1 Novedades -->
</div><!--Container ppal -->
<!-- Modal Historico Pedidos-->
<div id="PedidosProgramados" class="modal fade "  role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{TituloModal}} <span class="label label-info">{{logedUser.login}} </span> </h4>
            </div>
            <div class="modal-body" >
                <div class="row"><!--Row Programados por USER -->
                    <div class="col-md-12">

                        <div class = "panel panel-default">
                            <div class = "panel-heading">
                                <b><i class="fa fa-bars" aria-hidden="true"></i> Pedidos Malos </b>
                                <ul class="nav navbar-nav navbar-right">
                                    <div class="col-md-1 col-xs-1 ">
                                        <div data-ng-if="loading">
                                            <img title="Esperando respuesta" tooltip data-placement="top" src="images/loader.gif" />
                                        </div>
                                    </div>
                                </ul>
                            </div>
                            <div class="panel-body fixed-panel" >
                                <table class = "table small table-striped table-condensed">
                                    <thead>
                                    <tr>
                                        <th>Pedido</th>
                                        <th>Fecha Cita</th>
                                        <th>Estado</th>
                                        <th>Motivo</th>
                                        <th>Programaci√≥n</th>
                                        <th>Agenda</th>
                                        <th>Municipio</th>
                                        <th>Fecha Gesti√≥n</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="data in ListadoPrograUser as progra" class="animated bounceInRight">
                                        <td>
                                            <button type="button" class="btn btn-xs btn-warning" ng-click="executeCopy(data.PEDIDO_ID)">
                                                {{data.PEDIDO_ID}}
                                            </button>
                                        </td>
                                        <td>
                                            <span class="small">{{data.FECHA_CITA}}</span>
                                        </td>
                                        <td>
                                            <span class="small">{{data.STATUS}}</span>
                                        </td>
                                        <td>
                                            <span class="small">{{data.MOTIVO_MALO}}</span>
                                        </td>
                                        <td>
                                            <span class="small">{{data.PROGRAMACION}}</span>
                                        </td>
                                        <td>
                                            <span class="small" ng-class="{'ALARMADO':'label label-warning','GESTIONAR':'label label-danger','SIN CITA':'label label-info'}[data.MENSAJE]">{{data.MENSAJE}}</span>
                                        </td>
                                        <td>
                                            <span class="small">{{data.MUNICIPIO_ID}}</span>
                                        </td>
                                        <td>
                                            <span class="small">{{data.FECHA_GESTION}}</span>
                                        </td>

                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                            <div class="panel-footer clearfix" >
                                <div class="col-md-6">
                                    <ul class="nav navbar-nav navbar-left">
                                        <li>Registros: <span class="badge badge-default">{{progra.length}} {{errorMalos}}</span></li>

                                    </ul>

                                </div>


                                <div class="col-md-6">

                                </div>
                            </div>
                        </div><!--Panel -->
                    </div>
                </div><!--Row 1 Pedidos Programados -->
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div><!-- Modal Programados-->
<!-- Modal Historico Pedidos-->
<div id="HistoricoPedido" class="modal fade "  role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{TituloModal}} <span class="label label-info">{{pedidoHistorico}} </span> </h4>
                <span style="color:red" ><i class="fa fa-exclamation-triangle warning" aria-hidden="true" ng-hide="errorDatos==null"></i> {{errorDatos}}</span>
            </div>
            <div class="modal-body" >
                <div class = "panel panel-default">
                    <div class = "panel-heading">
                        <div class="panel-body fixed-panel" >
                            <table class = "table small table-striped table-condensed">
                                <thead>
                                <tr >
                                    <th><span class="small">ID</span></th>
                                    <th><span class="small">ACTIVIDAD</span></th>
                                    <th><span class="small">FECHA_GESTION</span></th>
                                    <th><span class="small">ESTADO</span></th>
                                    <th><span class="small">MOTIVO_MALO</span></th>
                                    <th><span class="small">USUARIO_ID</span></th>
                                    <th><span class="small">ANTERIOR</span></th>
                                    <th><span class="small">FINAL</span></th>
                                    <th><span class="small">IDLLAMADA</span></th>
                                    <th><span class="small">NUEVOPEDIDO</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="histo in ListadoHistoricoPedido" class="animated bounceInRight">
                                    <td><span class="small">{{histo.ID}}</span></td>
                                    <td><span class="small">{{histo.ACTIVIDAD}}</span></td>
                                    <td><span class="small">{{histo.FECHA_GESTION}}</span></td>
                                    <td><span class="small">{{histo.ESTADO}}</span></td>
                                    <td><span class="small">{{histo.MOTIVO_MALO || 'Sin Motivo'}}</span></td>
                                    <td><span class="small">{{histo.USUARIO_ID}}</span></td>
                                    <td><span class="small">{{histo.CONCEPTO_ANTERIOR}}</span></td>
                                    <td><span class="small">{{histo.CONCEPTO_FINAL}}</span></td>
                                    <td><span class="small">{{histo.IDLLAMADA || 'Sin Llamada'}}</span></td>
                                    <td><span class="small">{{histo.NUEVOPEDIDO || 'Sin Nuevo pedido'}}</span></td>

                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div><!-- Modal Eliminar Novedad-->
<!-- Modal Historico Pedidos Por USER-->
<div id="HistoricoPedidoUser" class="modal fade "  role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{TituloModal}}</h4>
                <span style="color:red" ><i class="fa fa-exclamation-triangle warning" aria-hidden="true" ng-hide="errorDatos==null"></i> {{errorDatos}}</span>
            </div>
            <div class = "panel-heading nav navbar-default">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12">
                            <ul class="nav navbar-nav navbar-left">
                                <li>
                                    <select ng-model="data.campo" class="btn btn-default btn-xs grupo-select">
                                        <option value='TODO' selected="selected">TODO</option>
                                        <option value='user'>Usuario</option>
                                        <option value='fuente'>Fuente</option>
                                        <option value='concepto_final'>Concepto</option>
                                        <option value='estado'>Estado</option>
                                        <option value='pedido_id'>Pedido</option>
                                    </select>

                                </li>
                                <li>&nbsp;</li>
                                <li>
                                    <input style="width:150px" class="btn btn-default btn-xs" name="valorCampo" ng-model="data.valorCampo" select-on-click capitalize type="text" placeholder="Palabra">

                                </li>
                                <li>&nbsp;</li>
                                <li>
                                    <div class="input-daterange" id="datepicker">
                                        <input type="text" class="btn btn-default btn-xs"  ng-model="data.fechaIni" datetime-picker date-format="yyyy-MM-dd" date-only/><i class="fa fa-calendar fa-fw"></i>
                                        <input type="text" class="btn btn-default btn-xs" ng-model="data.fechaFin" datetime-picker date-format="yyyy-MM-dd" date-only/><i class="fa fa-calendar fa-fw"></i>
                                        <button type="button" class="btn btn-primary btn-xs" ng-click="calcularListadoReconfiguracion()"  title="Buscar" tooltip data-placement="left" ng-disabled="loading">
                                            <i class="fa fa-search"  aria-hidden="true"></i>
                                        </button>
                                        <button type="button" class="btn btn-primary btn-xs" ng-click="csvHistoricosReconfiguracion()"  title="Exportar" tooltip data-placement="left" ng-disabled="loading">
                                            <i class="fa fa-cloud-download"  aria-hidden="true"></i>
                                        </button>

                                    </div>
                                </li>



                            </ul>
                        </div>

                    </div>
                </div>

            </div>
            <div class="modal-body" >
                <div class = "panel panel-default">
                    <div class = "panel-heading">
                        <div class="panel-body fixed-panel" >
                            <table class = "table small table-striped table-condensed">
                                <thead>
                                <tr >
                                    <th><span class="small">PEDIDO</span></th>
                                    <th><span class="small">ACTIVIDAD</span></th>
                                    <th><span class="small">FECHA_GESTION</span></th>
                                    <th><span class="small">DURACION</span></th>
                                    <th><span class="small">ESTADO</span></th>
                                    <th><span class="small">CONCEPTO FINAL</span></th>
                                    <th><span class="small">FUENTE</span></th>
                                    <th><span class="small">ID</span></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="pediUser in listado_pedidos as pedis" class="animated bounceInRight">
                                    <td><span class="small">{{pediUser.pedido}}</span></td>
                                    <td><span class="small">{{pediUser.actividad}}</span></td>
                                    <td><span class="small">{{pediUser.fecha_fin}}</span></td>
                                    <td><span class="small">{{pediUser.duracion}}</span></td>
                                    <td><span class="small">{{pediUser.estado}}</span></td>
                                    <td><span class="small">{{pediUser.concepto_final}}</span></td>
                                    <td><span class="small">{{pediUser.fuente}}</span></td>
                                    <td><span class="small">{{pediUser.id}}</span></td>

                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <span class="pull-left">Pedidos: <span class="label label-success">{{pedidosUnicos || 0}}</span></span>&nbsp; &nbsp;
                <span class="pull-left">Transacciones: <span class="label label-success">{{pedis.length || 0}}</span></span>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div><!-- Modal Eliminar Novedad-->
<!-- Modal Historico Pedidos-->
<div id="ModalAuditoria" class="modal fade "  role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content" >
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{tituloModal}} <span class="label label-info">{{infoFenix.PEDIDO_ID}} </span> </h4>
                <span style="color:red" ><i class="fa fa-exclamation-triangle warning" aria-hidden="true" ng-hide="errorDatos==null"></i> {{errorDatos}}</span>
            </div>
            <div class="modal-body" >
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-10">
                            <div class="well well-sm"><b>Usuarios:</b> {{infoFenix.USUARIOS}} | <b>Fechas:</b> {{infoFenix.FECHAS}} <span class="pull-right badge">{{infoFenix.CANTIDADUSERS}}</span></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-10">
                            <div class = "well well-sm" ng-repeat="auditoria in auditorias as auditarObj track by $index  ">
                                <form class="form-inline">
                                    <div class="form-group" ng-controller="UsersCtrl">
                                        <label class="sr-only" for="usrEstudio">Usuario:</label>
                                        <ui-select id="usrEstudio" name="usrEstudio" ng-model="auditoria.USUARIO_ID_GESTION" theme="bootstrap">
                                            <ui-select-match placeholder="Usuario">
                                                {{auditoria.USUARIO_ID_GESTION.USUARIO_ID}}
                                            </ui-select-match>
                                            <ui-select-choices repeat="g  in  listaUsuarios | filter: $select.search track by $index">
                                                <div ng-bind-html="g.USUARIO_ID | highlight: $select.search"></div>
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                    <div class="form-group has-feedback">
                                        <label class="sr-only" for="fechaEstudio">Fecha:</label>
                                        <input id="fechaEstudio" name="fechaEstudio" style="width:120px" class="form-control btn-xs" type="text" ng-model="auditoria.FECHA_GESTION" datetime-picker date-only date-format="yyyy-MM-dd"/>
                                        <i class="fa fa-calendar fa-fw form-control-feedback"></i>
                                    </div>
                                    <div class="form-group has-feedback">
                                        <label class="sr-only" for="estadoAuditoria">Estado:</label>
                                        <select id="estadoAuditoria" name="estadoAuditoria"
                                                class="form-control btn-xs" style="width: 150px;"
                                                ng-model="auditoria.ESTADO_PROCESO"
                                                required>
                                            <option value="" disabled>Estado</option>
                                            <option ng-repeat="e in listaOpcionesAuditoria | unique:'ESTADO_ID'"
                                                    value="{{e.ESTADO_ID}}">
                                                {{e.ESTADO_ID}}
                                            </option>
                                        </select>
                                        <i class="fa fa-cog form-control-feedback" aria-hidden="true"></i>
                                    </div>
                                    <div class="form-group has-feedback">
                                        <label class="sr-only" for="obidAuditoria">Resultado:</label>
                                        <select id="obidAuditoria" name="obidAuditoria" class="form-control btn-xs" style="width: 150px;"
                                                ng-model="auditoria.ANALISIS">
                                            <option value="" disabled>--Seleccione--</option>
                                            <option ng-repeat="e in listaOpcionesAuditoria | filter:{ESTADO_ID: auditoria.ESTADO_PROCESO}:true | unique:'OBSERVACION_ID'"
                                                    value="{{e.OBSERVACION_ID}}">
                                                {{e.OBSERVACION_ID}}
                                            </option>
                                        </select>
                                        <i class="fa fa-cog form-control-feedback" aria-hidden="true"></i>
                                    </div>
                                    <div class="form-group has-feedback">
                                        <label class="sr-only" for="obsAuditoria">Observaciones:</label>
                                        <textarea id="obsAuditoria" name="obsAuditoria" class="form-control btn-xs" style="width:150px" rows="2" cols="50"
                                                  ng-model="auditoria.OBSERVACIONES"></textarea>
                                        <i class="fa fa-comment form-control-feedback" aria-hidden="true"></i>
                                    </div>
                                    <span class="pull-right">
                                        <div class="form-group">
                                            <button type="button" class="btn btn-warning btn-circle-xs pull-left" ng-click="removeNuevaNovedad()" ng-show="$last">
                                                <i class="fa fa-minus"  aria-hidden="true"></i>
                                            </button>
                                            <button type="button" class="btn btn-warning btn-circle-xs pull-right" ng-show="$last" ng-click="addNuevaNovedad()">
                                                <i class="fa fa-plus"  aria-hidden="true"></i>
                                            </button>
                                        </div></span>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" ng-click="guardarAuditoria(auditarObj,infoFenix,gestion)" data-dismiss="modal">Guardar</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div><!-- Modal Eliminar Novedad-->
<br>
<ol class="breadcrumb">
    <li><a href=".#/">Home</a> </li>
    <li><a href="">Asignaciones</a></li>
    <li class="active">{{title}} </li>
</ol>

<!--<script language='javascript'>
    function obtenerConcepto() {
        var idconcepto = document.getElementById("zona");
        var concepto = idconcepto.options[idconcepto.selectedIndex].value;
    }
</script>-->
